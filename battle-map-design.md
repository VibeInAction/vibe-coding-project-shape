# 几何境域：形态之战 - 战斗地图设定

## 概述

战斗地图是游戏运行时的实际对战场地，包含地形要素、资源分布、障碍物、出生点位等关键元素。每张地图都经过精心设计，为不同种族和战术提供多样化的战略选择。

## 一、地图基本参数

### 1.1 地图规格
- **地图大小**：分为小型(800x600)、中型(1000x800)、大型(1200x1000)
- **网格系统**：50x50标准网格，用于建筑放置和路径计算
- **视野范围**：默认200单位，受地形和建筑影响
- **地形高度**：0-5级，影响视野和移动

### 1.2 玩家数量
- **1v1**：标准对战模式
- **2v2**：团队对战
- **FFA**：自由对战（3-4人）
- **对抗AI**：1-4人对抗电脑

## 二、地形要素

### 2.1 基础地形类型
根据地形设计文档，战斗地图包含以下地形：

| 地形类型 | 移动成本 | 防御加成 | 视野影响 | 特殊效果 |
|---------|---------|---------|---------|---------|
| 平原 | 1.0 | 0% | 100% | 无 |
| 山地 | 1.5 | +30% | +20% | 高地优势 |
| 水域 | 2.0 | -20% | -10% | 圆环族优势 |
| 森林 | 1.3 | +15% | -30% | 螺旋之子优势 |
| 沙漠 | 1.2 | -10% | +50% | 方碑盟约优势 |
| 雪地 | 1.4 | +20% | +10% | 三角议会优势 |

### 2.2 特殊地形
- **形态涡流**：随机改变单位形态
- **混沌裂隙**：造成持续伤害
- **能量节点**：提供全局加成
- **静默区域**：禁用技能和飞行

## 三、资源分布

### 3.1 基础资源点
- **形魄泉眼**：基础资源，每秒+5形魄能量
  - 分布：地图平均分布，每个出生点附近2-3个
  - 容量：无限，但采集速度受距离影响

- **纯净水晶簇**：高级资源，每秒+1纯净形魄
  - 分布：地图关键位置，通常4-6个
  - 容量：有限，采集完后需要120秒重生

### 3.2 战略资源
- **形态水晶**：用于英雄技能和终极单位
  - 分布：地图中心或危险区域
  - 数量：2-4个，控制后获得巨大优势

- **几何遗迹**：占领后解锁特殊科技
  - 分布：固定位置，每个地图1-2个
  - 效果：永久的科技加成

## 四、障碍物系统

### 4.1 不可通行障碍
- **几何巨石**：永久性障碍
- **深渊裂谷**：无法跨越的鸿沟
- **能量屏障**：需要特定条件关闭

### 4.2 可破坏障碍
- **水晶墙**：生命值500，可被攻击摧毁
- **藤蔓丛**：可被清除，清除后变成平原
- **临时建筑**：中立建筑，占领后获得

### 4.3 动态障碍
- **形态门**：周期性开关
- **能量桥梁**：需要激活才能通行
- **移动平台**：按固定路径移动

## 五、出生点位设计

### 5.1 标准出生点（1v1）
- **位置**：地图对角
- **空间**：150x150的建造区域
- **初始资源**：
  - 200形魄能量
  - 50纯净形魄
  - 1个主基地（已建造）

### 5.2 团队出生点（2v2）
- **位置**：相邻两角
- **共享资源**：队员之间资源传送
- **初始防御**：2个防御塔

### 5.3 FFA出生点
- **位置**：地图四角或中心对称
- **初始距离**：确保公平性
- **中立缓冲**：出生点间有中立区域

## 六、NPC与中立单位

### 6.1 中立商店
- **位置**：地图中心
- **功能**：
  - 雇佣佣兵单位
  - 购买临时加成
  - 出售资源

### 6.2 野生动物
- **几何兽**：被动单位，击败获得资源
- **混沌生物**：主动攻击，威胁较小
- **守护者**：保护关键资源点

### 6.3 可招募单位
- **游侠**：快速侦察单位
- **工程师**：修理建筑
- **间谍**：隐形单位

## 七、地图模板

### 7.1 中央圆环城战场
```
地图特征：
- 中心：静默圆湖（水域）
- 环形：能量回廊连接各区域
- 资源：湖边形魄泉眼丰富
- 战略：控制回廊获得机动优势

出生点：4个，分别位于东南西北
特殊：中央圆环可占领，提供视野加成
```

### 7.2 三角尖塔战场
```
地图特征：
- 地形：多级山地，高地优势明显
- 障碍：晶格山脉限制通行
- 资源：山顶纯净水晶丰富
- 战略：控制制高点获得攻击加成

出生点：2-4个，位于不同高度
特殊：三角尖塔可占领，提供攻击范围加成
```

### 7.3 矩阵之都战场
```
地图特征：
- 地形：规则网格，建筑效率高
- 结构：模块化区域，可分割控制
- 资源：科技资源丰富
- 战略：控制数据中心获得资源加成

出生点：对称分布
特殊：浮空平台可占领，提供空中优势
```

### 7.4 生命螺旋城战场
```
地图特征：
- 地形：螺旋森林，视野受限
- 生态：生命花园提供治疗
- 资源：生命能量丰富
- 战略：藤蔓网络快速移动

出生点：2-4个，沿螺旋分布
特殊：生命之树可占领，提供恢复加成
```

### 7.5 源初形核战场
```
地图特征：
- 中心：源初核心，终极目标
- 危险：混沌裂隙环绕
- 动态：形态涡流影响战斗
- 战略：控制核心获得胜利

出生点：4个，位于四角
特殊：核心区域伤害但提供巨大加成
```

## 八、地图编辑器参数

### 8.1 地图文件格式
```json
{
  "mapInfo": {
    "name": "地图名称",
    "size": [1000, 800],
    "maxPlayers": 4,
    "gameMode": ["conquest", "formBattle"]
  },
  "terrain": [
    {
      "type": "water",
      "area": [[x1,y1], [x2,y2], ...],
      "height": 0
    }
  ],
  "resources": [
    {
      "type": "morphEnergy",
      "position": [x, y],
      "amount": 5
    }
  ],
  "spawnPoints": [
    {
      "id": 1,
      "position": [100, 100],
      "direction": "southeast"
    }
  ],
  "obstacles": [
    {
      "type": "rock",
      "position": [x, y],
      "size": [50, 50]
    }
  ],
  "npcs": [
    {
      "type": "shop",
      "position": [500, 400],
      "inventory": ["mercenary", "potion"]
    }
  ]
}
```

### 8.2 平衡性参数
- **资源平衡**：每个出生点周围资源总量相等
- **路径平衡**：到地图中心的距离大致相等
- **战略点平衡**：关键战略点到各出生点距离相近

## 九、地图选择与投票

### 9.1 地图分类
- **新手地图**：简单地形，资源丰富
- **竞技地图**：平衡性优先，适合比赛
- **娱乐地图**：特殊机制，玩法多样
- **大型地图**：适合长期对战

### 9.2 地图投票系统
- 每场比赛前玩家投票选择地图
- 可以排除特定地图类型
- 随机选择未排除的地图

## 十、特殊地图机制

### 10.1 动态事件
- **几何风暴**：周期性改变地形
- **能量潮汐**：资源产出波动
- **混沌入侵**：中立敌人生成

### 10.2 环境危险
- **形态坍塌**：随机地块消失
- **能量风暴**：对露天单位造成伤害
- **空间扭曲**：随机传送单位

### 10.3 互动元素
- **几何机关**：玩家可激活的陷阱
- **传送门**：快速移动通道
- **能量塔**：可占领的防御设施

## 十一、地图设计原则

1. **种族平衡**：确保没有种族在特定地图上有过大优势
2. **战略深度**：提供多种战术选择
3. **视觉清晰**：地形和单位易于识别
4. **性能优化**：保证流畅运行
5. **趣味性**：独特机制增加游戏乐趣

## 十二、未来发展

1. **随机地图生成器**：程序化生成无限地图
2. **玩家自定义地图**：地图编辑器和工坊
3. **季节性地图**：随时间变化的地图
4. **跨界地图**：与其他IP联动的特殊地图

---

这份战斗地图设定为《几何境域：形态之战》提供了完整的地图系统框架，确保游戏的对战环境既有策略深度，又保持了良好的平衡性和可玩性。每张地图都经过精心设计，为玩家提供独特的战术挑战和多样的游戏体验。