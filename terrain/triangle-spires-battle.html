<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三角尖塔战场 - 几何境域：形态之战</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes crystal-glow {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        @keyframes energy-flow {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: -100; }
        }
        
        .floating { animation: float 3s ease-in-out infinite; }
        .crystal-glow { animation: crystal-glow 2s ease-in-out infinite; }
        .energy-flow { animation: energy-flow 2s linear infinite; }
        
        .tooltip {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip-trigger:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        .minimap-point {
            transition: all 0.3s ease;
        }
        
        .minimap-point:hover {
            transform: scale(1.5);
            z-index: 10;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        <!-- 标题区域 -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                三角尖塔战场
            </h1>
            <p class="text-xl text-gray-300">高地优势 · 晶格山脉 · 战略制高点</p>
            <div class="mt-4 flex justify-center gap-4 text-sm">
                <span class="bg-blue-600 px-3 py-1 rounded-full">2-4 玩家</span>
                <span class="bg-purple-600 px-3 py-1 rounded-full">中型地图</span>
                <span class="bg-green-600 px-3 py-1 rounded-full">高低差地形</span>
            </div>
        </div>

        <div class="grid lg:grid-cols-4 gap-6">
            <!-- 主地图区域 -->
            <div class="lg:col-span-3">
                <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700">
                    <div class="relative">
                        <svg viewBox="0 0 1000 800" class="w-full h-auto">
                            <!-- 背景渐变 -->
                            <defs>
                                <linearGradient id="mountainGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#4a5568;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#2d3748;stop-opacity:1" />
                                </linearGradient>
                                <linearGradient id="crystalGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:0.8" />
                                    <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0.4" />
                                </linearGradient>
                                <filter id="glow">
                                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                    <feMerge>
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                            </defs>

                            <!-- 地形背景 -->
                            <rect width="1000" height="800" fill="url(#mountainGrad)"/>
                            
                            <!-- 山地层次 -->
                            <g class="terrain">
                                <!-- 最高山峰 -->
                                <polygon points="500,100 400,250 600,250" fill="#64748b" stroke="#475569" stroke-width="2"/>
                                <polygon points="500,50 450,150 550,150" fill="#94a3b8" stroke="#64748b" stroke-width="2"/>
                                
                                <!-- 次级山峰 -->
                                <polygon points="200,200 100,350 300,350" fill="#64748b" stroke="#475569" stroke-width="2"/>
                                <polygon points="800,200 700,350 900,350" fill="#64748b" stroke="#475569" stroke-width="2"/>
                                <polygon points="350,400 250,550 450,550" fill="#64748b" stroke="#475569" stroke-width="2"/>
                                <polygon points="650,400 550,550 750,550" fill="#64748b" stroke="#475569" stroke-width="2"/>
                                
                                <!-- 山谷 -->
                                <path d="M 100,600 Q 300,650 500,600 T 900,600 L 900,800 L 100,800 Z" 
                                      fill="#475569" stroke="#334155" stroke-width="2"/>
                            </g>

                            <!-- 晶格山脉 -->
                            <g class="crystal-mountains">
                                <!-- 中央晶格墙 -->
                                <g class="tooltip-trigger cursor-pointer">
                                    <rect x="480" y="250" width="40" height="200" fill="#60a5fa" fill-opacity="0.3" 
                                          stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,5" class="crystal-glow"/>
                                    <text x="500" y="350" text-anchor="middle" fill="#dbeafe" font-size="12">晶格墙</text>
                                    <g class="tooltip absolute bg-gray-900 p-2 rounded text-xs">
                                        <rect x="520" y="330" width="120" height="60" fill="#1f2937" stroke="#374151" rx="4"/>
                                        <text x="530" y="350" fill="#f3f4f6">不可逾越的障碍</text>
                                        <text x="530" y="365" fill="#9ca3af">阻挡单位通行</text>
                                        <text x="530" y="380" fill="#fbbf24">三角议会：-50%伤害</text>
                                    </g>
                                </g>
                                
                                <!-- 侧翼晶格墙 -->
                                <rect x="280" y="350" width="40" height="150" fill="#60a5fa" fill-opacity="0.3" 
                                      stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,5" class="crystal-glow"/>
                                <rect x="680" y="350" width="40" height="150" fill="#60a5fa" fill-opacity="0.3" 
                                      stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,5" class="crystal-glow"/>
                            </g>

                            <!-- 三角尖塔 -->
                            <g class="spires">
                                <!-- 中央主塔 -->
                                <g class="tooltip-trigger cursor-pointer" transform="translate(500,150)">
                                    <polygon points="0,-60 -40,20 40,20" fill="#fbbf24" stroke="#f59e0b" stroke-width="3" filter="url(#glow)" class="floating"/>
                                    <circle cx="0" cy="0" r="8" fill="#fef3c7" filter="url(#glow)"/>
                                    <text x="0" y="40" text-anchor="middle" fill="#fbbf24" font-size="14" font-weight="bold">三角尖塔</text>
                                    <g class="tooltip absolute bg-gray-900 p-2 rounded">
                                        <rect x="20" y="-60" width="140" height="80" fill="#1f2937" stroke="#374151" rx="4"/>
                                        <text x="30" y="-40" fill="#f3f4f6">战略制高点</text>
                                        <text x="30" y="-25" fill="#9ca3af">攻击范围 +50%</text>
                                        <text x="30" y="-10" fill="#10b981">视野范围 +100%</text>
                                        <text x="30" y="5" fill="#3b82f6">可占领控制</text>
                                    </g>
                                </g>
                                
                                <!-- 侧塔 -->
                                <g class="tooltip-trigger cursor-pointer" transform="translate(200,250)">
                                    <polygon points="0,-40 -30,15 30,15" fill="#fbbf24" stroke="#f59e0b" stroke-width="2" filter="url(#glow)"/>
                                    <circle cx="0" cy="0" r="6" fill="#fef3c7"/>
                                </g>
                                <g class="tooltip-trigger cursor-pointer" transform="translate(800,250)">
                                    <polygon points="0,-40 -30,15 30,15" fill="#fbbf24" stroke="#f59e0b" stroke-width="2" filter="url(#glow)"/>
                                    <circle cx="0" cy="0" r="6" fill="#fef3c7"/>
                                </g>
                            </g>

                            <!-- 能量桥梁 -->
                            <g class="energy-bridges">
                                <g class="tooltip-trigger cursor-pointer">
                                    <path d="M 300,400 Q 400,350 500,400" stroke="#8b5cf6" stroke-width="4" 
                                          fill="none" stroke-dasharray="10,5" class="energy-flow" filter="url(#glow)"/>
                                    <text x="400" y="370" text-anchor="middle" fill="#c4b5fd" font-size="12">能量桥</text>
                                    <g class="tooltip absolute bg-gray-900 p-2 rounded">
                                        <rect x="420" y="350" width="120" height="60" fill="#1f2937" stroke="#374151" rx="4"/>
                                        <text x="430" y="370" fill="#f3f4f6">可破坏的桥梁</text>
                                        <text x="430" y="385" fill="#9ca3af">生命值: 800</text>
                                        <text x="430" y="400" fill="#ef4444">破坏后修复需60秒</text>
                                    </g>
                                </g>
                                <path d="M 500,400 Q 600,350 700,400" stroke="#8b5cf6" stroke-width="4" 
                                      fill="none" stroke-dasharray="10,5" class="energy-flow" filter="url(#glow)"/>
                            </g>

                            <!-- 资源点 -->
                            <g class="resources">
                                <!-- 山顶纯净水晶 -->
                                <g class="tooltip-trigger cursor-pointer" transform="translate(500,100)">
                                    <circle r="20" fill="url(#crystalGrad)" stroke="#60a5fa" stroke-width="2" filter="url(#glow)"/>
                                    <text y="5" text-anchor="middle" fill="#dbeafe" font-size="12" font-weight="bold">纯净水晶</text>
                                    <g class="tooltip absolute bg-gray-900 p-2 rounded">
                                        <rect x="25" y="-20" width="140" height="60" fill="#1f2937" stroke="#374151" rx="4"/>
                                        <text x="35" y="0" fill="#f3f4f6">高级资源点</text>
                                        <text x="35" y="15" fill="#fbbf24">+2 纯净形魄/秒</text>
                                        <text x="35" y="30" fill="#9ca3af">容量: 500</text>
                                    </g>
                                </g>
                                
                                <!-- 水晶矿井 -->
                                <g class="tooltip-trigger cursor-pointer" transform="translate(200,300)">
                                    <rect x="-25" y="-20" width="50" height="40" fill="#6366f1" stroke="#4f46e5" stroke-width="2" rx="5"/>
                                    <text y="5" text-anchor="middle" fill="#e0e7ff" font-size="11">水晶矿</text>
                                </g>
                                <g class="tooltip-trigger cursor-pointer" transform="translate(800,300)">
                                    <rect x="-25" y="-20" width="50" height="40" fill="#6366f1" stroke="#4f46e5" stroke-width="2" rx="5"/>
                                    <text y="5" text-anchor="middle" fill="#e0e7ff" font-size="11">水晶矿</text>
                                </g>
                                
                                <!-- 山谷形魄泉眼 -->
                                <g class="tooltip-trigger cursor-pointer" transform="translate(350,600)">
                                    <circle r="15" fill="#10b981" stroke="#059669" stroke-width="2"/>
                                    <text y="5" text-anchor="middle" fill="#d1fae5" font-size="10">形魄泉</text>
                                </g>
                                <g class="tooltip-trigger cursor-pointer" transform="translate(650,600)">
                                    <circle r="15" fill="#10b981" stroke="#059669" stroke-width="2"/>
                                    <text y="5" text-anchor="middle" fill="#d1fae5" font-size="10">形魄泉</text>
                                </g>
                            </g>

                            <!-- 出生点 -->
                            <g class="spawn-points">
                                <!-- 玩家1出生点 -->
                                <g class="tooltip-trigger cursor-pointer" transform="translate(150,150)">
                                    <rect x="-30" y="-30" width="60" height="60" fill="#ef4444" fill-opacity="0.5" 
                                          stroke="#ef4444" stroke-width="3" rx="5" stroke-dasharray="5,5"/>
                                    <text y="5" text-anchor="middle" fill="#fecaca" font-size="14" font-weight="bold">P1</text>
                                    <text y="-40" text-anchor="middle" fill="#ef4444" font-size="12">出生点</text>
                                </g>
                                
                                <!-- 玩家2出生点 -->
                                <g class="tooltip-trigger cursor-pointer" transform="translate(850,150)">
                                    <rect x="-30" y="-30" width="60" height="60" fill="#3b82f6" fill-opacity="0.5" 
                                          stroke="#3b82f6" stroke-width="3" rx="5" stroke-dasharray="5,5"/>
                                    <text y="5" text-anchor="middle" fill="#dbeafe" font-size="14" font-weight="bold">P2</text>
                                    <text y="-40" text-anchor="middle" fill="#3b82f6" font-size="12">出生点</text>
                                </g>
                                
                                <!-- 额外出生点（3-4人模式） -->
                                <g class="tooltip-trigger cursor-pointer" transform="translate(150,650)">
                                    <rect x="-25" y="-25" width="50" height="50" fill="#10b981" fill-opacity="0.5" 
                                          stroke="#10b981" stroke-width="2" rx="5" stroke-dasharray="5,5"/>
                                    <text y="5" text-anchor="middle" fill="#d1fae5" font-size="12">P3</text>
                                </g>
                                <g class="tooltip-trigger cursor-pointer" transform="translate(850,650)">
                                    <rect x="-25" y="-25" width="50" height="50" fill="#f59e0b" fill-opacity="0.5" 
                                          stroke="#f59e0b" stroke-width="2" rx="5" stroke-dasharray="5,5"/>
                                    <text y="5" text-anchor="middle" fill="#fed7aa" font-size="12">P4</text>
                                </g>
                            </g>

                            <!-- 防御工事 -->
                            <g class="defenses">
                                <g class="tooltip-trigger cursor-pointer" transform="translate(350,200)">
                                    <polygon points="0,-20 -20,10 20,10" fill="#6b7280" stroke="#4b5563" stroke-width="2"/>
                                    <text y="25" text-anchor="middle" fill="#d1d5db" font-size="10">防御塔</text>
                                    <g class="tooltip absolute bg-gray-900 p-2 rounded">
                                        <rect x="25" y="-20" width="120" height="60" fill="#1f2937" stroke="#374151" rx="4"/>
                                        <text x="35" y="0" fill="#f3f4f6">高地防御工事</text>
                                        <text x="35" y="15" fill="#ef4444">攻击力 +30%</text>
                                        <text x="35" y="30" fill="#10b981">可占领</text>
                                    </g>
                                </g>
                                <g class="tooltip-trigger cursor-pointer" transform="translate(650,200)">
                                    <polygon points="0,-20 -20,10 20,10" fill="#6b7280" stroke="#4b5563" stroke-width="2"/>
                                    <text y="25" text-anchor="middle" fill="#d1d5db" font-size="10">防御塔</text>
                                </g>
                            </g>

                            <!-- 中立商店 -->
                            <g class="tooltip-trigger cursor-pointer" transform="translate(500,500)">
                                <rect x="-30" y="-25" width="60" height="50" fill="#8b5cf6" stroke="#7c3aed" stroke-width="2" rx="5"/>
                                <text y="0" text-anchor="middle" fill="#e9d5ff" font-size="12" font-weight="bold">商店</text>
                                <text y="15" text-anchor="middle" fill="#ddd6fe" font-size="10">中立</text>
                                <g class="tooltip absolute bg-gray-900 p-2 rounded">
                                    <rect x="35" y="-25" width="140" height="80" fill="#1f2937" stroke="#374151" rx="4"/>
                                    <text x="45" y="-5" fill="#f3f4f6">中立商店</text>
                                    <text x="45" y="10" fill="#9ca3af">雇佣佣兵单位</text>
                                    <text x="45" y="25" fill="#fbbf24">购买临时加成</text>
                                    <text x="45" y="40" fill="#10b981">出售资源</text>
                                </g>
                            </g>

                            <!-- 高度指示 -->
                            <g class="height-indicators">
                                <text x="50" y="50" fill="#9ca3af" font-size="12" opacity="0.7">海拔 5</text>
                                <text x="50" y="200" fill="#9ca3af" font-size="12" opacity="0.7">海拔 3</text>
                                <text x="50" y="400" fill="#9ca3af" font-size="12" opacity="0.7">海拔 1</text>
                                <text x="50" y="650" fill="#9ca3af" font-size="12" opacity="0.7">海拔 0</text>
                            </g>
                        </svg>

                        <!-- 地图图例 -->
                        <div class="mt-4 grid grid-cols-2 md:grid-cols-3 gap-4 text-sm">
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-yellow-500 rounded"></div>
                                <span>三角尖塔（制高点）</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-blue-500 rounded opacity-60"></div>
                                <span>晶格山脉（障碍）</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-purple-500 rounded"></div>
                                <span>能量桥梁（可破坏）</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-indigo-500 rounded"></div>
                                <span>水晶矿井（可占领）</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 侧边栏 -->
            <div class="space-y-6">
                <!-- 小地图 -->
                <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-4 border border-gray-700">
                    <h3 class="text-lg font-semibold mb-3">小地图</h3>
                    <div class="relative bg-gray-900 rounded-lg" style="padding-bottom: 80%;">
                        <svg class="absolute inset-0 w-full h-full rounded-lg" viewBox="0 0 1000 800">
                            <!-- 简化的地形 -->
                            <rect width="1000" height="800" fill="#374151"/>
                            
                            <!-- 山脉轮廓 -->
                            <polygon points="500,10 400,25 600,25" fill="#6b7280"/>
                            <polygon points="200,20 100,35 300,35" fill="#6b7280"/>
                            <polygon points="800,20 700,35 900,35" fill="#6b7280"/>
                            
                            <!-- 资源点 -->
                            <circle cx="500" cy="10" r="3" fill="#60a5fa" class="minimap-point"/>
                            <circle cx="200" cy="30" r="2" fill="#6366f1" class="minimap-point"/>
                            <circle cx="800" cy="30" r="2" fill="#6366f1" class="minimap-point"/>
                            <circle cx="350" cy="60" r="2" fill="#10b981" class="minimap-point"/>
                            <circle cx="650" cy="60" r="2" fill="#10b981" class="minimap-point"/>
                            
                            <!-- 出生点 -->
                            <rect x="145" y="145" width="10" height="10" fill="#ef4444" class="minimap-point"/>
                            <rect x="845" y="145" width="10" height="10" fill="#3b82f6" class="minimap-point"/>
                            <rect x="145" y="645" width="8" height="8" fill="#10b981" class="minimap-point"/>
                            <rect x="845" y="645" width="8" height="8" fill="#f59e0b" class="minimap-point"/>
                            
                            <!-- 当前视图框 -->
                            <rect x="250" y="150" width="500" height="500" fill="none" stroke="#fbbf24" stroke-width="1" stroke-dasharray="2,2" opacity="0.5"/>
                        </svg>
                    </div>
                </div>

                <!-- 地图信息 -->
                <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-4 border border-gray-700">
                    <h3 class="text-lg font-semibold mb-3">地图信息</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-400">地图大小</span>
                            <span>1000x800</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">最大玩家</span>
                            <span>4人</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">地形类型</span>
                            <span>山地</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">资源点</span>
                            <span>5个</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">战略点</span>
                            <span>3个</span>
                        </div>
                    </div>
                </div>

                <!-- 种族优势 -->
                <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-4 border border-gray-700">
                    <h3 class="text-lg font-semibold mb-3">种族优势</h3>
                    <div class="space-y-2 text-sm">
                        <div class="p-2 bg-yellow-900/30 rounded">
                            <span class="text-yellow-400 font-semibold"><a href="../races/triangle-council.html" class="hover:text-yellow-300 transition">三角议会</a></span>
                            <p class="text-gray-300 text-xs mt-1">移动速度 +30%</p>
                        </div>
                        <div class="p-2 bg-blue-900/30 rounded">
                            <span class="text-blue-400 font-semibold"><a href="../races/circle-clan.html" class="hover:text-blue-300 transition">圆环族</a></span>
                            <p class="text-gray-300 text-xs mt-1">晶格墙伤害减免</p>
                        </div>
                        <div class="p-2 bg-green-900/30 rounded">
                            <span class="text-green-400 font-semibold"><a href="../races/spiral-offspring.html" class="hover:text-green-300 transition">螺旋之子</a></span>
                            <p class="text-gray-300 text-xs mt-1">山区视野 +20%</p>
                        </div>
                        <div class="p-2 bg-purple-900/30 rounded">
                            <span class="text-purple-400 font-semibold"><a href="../races/square-obelisk.html" class="hover:text-purple-300 transition">方碑盟约</a></span>
                            <p class="text-gray-300 text-xs mt-1">建造速度 +15%</p>
                        </div>
                    </div>
                </div>

                <!-- 操作按钮 -->
                <div class="space-y-3">
                    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        开始战斗
                    </button>
                    <button class="w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                        编辑地图
                    </button>
                    <a href="index.html" class="block w-full bg-gray-600 hover:bg-gray-500 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 text-center">
                        返回地图列表
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 地图交互功能
        document.addEventListener('DOMContentLoaded', function() {
            // 资源点动画
            const resources = document.querySelectorAll('.resources circle, .resources rect');
            resources.forEach(resource => {
                resource.addEventListener('click', function() {
                    this.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 200);
                });
            });

            // 出生点选择
            const spawnPoints = document.querySelectorAll('.spawn-points > g');
            spawnPoints.forEach(point => {
                point.addEventListener('click', function() {
                    // 移除其他选中状态
                    spawnPoints.forEach(p => {
                        p.querySelector('rect').style.strokeWidth = p.querySelector('rect').getAttribute('stroke-width');
                    });
                    // 高亮当前选择
                    const rect = this.querySelector('rect');
                    rect.style.strokeWidth = '5';
                });
            });

            // 小地图点击导航
            const minimap = document.querySelector('.minimap-point');
            if (minimap) {
                minimap.addEventListener('click', function(e) {
                    console.log('Navigating to:', e.target.getAttribute('cx'), e.target.getAttribute('cy'));
                });
            }
        });
    </script>
</body>
</html>