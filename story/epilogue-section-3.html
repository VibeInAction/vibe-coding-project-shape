<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>终章：新的开始 - 无尽的故事 | 几何境域：形态之战</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes rotate-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyforms story-glow {
            0%, 100% { 
                box-shadow: 0 0 30px rgba(147, 51, 234, 0.5),
                           0 0 60px rgba(147, 51, 234, 0.3);
            }
            50% { 
                box-shadow: 0 0 50px rgba(147, 51, 234, 0.8),
                           0 0 100px rgba(147, 51, 234, 0.5);
            }
        }
        
        @keyforms legacy-sparkle {
            0% { 
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }
            50% { 
                transform: scale(1.2) rotate(180deg);
                opacity: 1;
            }
            100% { 
                transform: scale(0) rotate(360deg);
                opacity: 0;
            }
        }
        
        @keyforms infinite-loop {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(1); }
            75% { transform: rotate(270deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        .float-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        .pulse-animation {
            animation: pulse 2s ease-in-out infinite;
        }
        
        .rotate-slow {
            animation: rotate-slow 30s linear infinite;
        }
        
        .story-effect {
            animation: story-glow 4s ease-in-out infinite;
        }
        
        .legacy-effect {
            position: relative;
        }
        
        .legacy-effect::before {
            content: '✨';
            position: absolute;
            top: -10px;
            right: -10px;
            animation: legacy-sparkle 2s ease-in-out infinite;
        }
        
        .infinite-effect {
            animation: infinite-loop 20s linear infinite;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #9333ea 0%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .story-content {
            line-height: 1.8;
        }
        
        .story-content p {
            margin-bottom: 1.5rem;
            text-indent: 2em;
        }
        
        .dialogue {
            background: rgba(147, 51, 234, 0.1);
            border-left: 4px solid #9333ea;
            padding: 1rem;
            margin: 1.5rem 0;
            font-style: italic;
        }
        
        .geometry-bg {
            position: fixed;
            inset: 0;
            pointer-events: none;
            opacity: 0.03;
            z-index: 0;
        }
        
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #9333ea, #ec4899);
            z-index: 9999;
            transition: width 0.3s ease;
        }
        
        .theme-transition * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease !important;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- 阅读进度条 -->
    <div class="reading-progress" id="readingProgress"></div>
    
    <!-- 几何背景装饰 -->
    <div class="geometry-bg">
        <div class="absolute top-20 left-10 w-64 h-64 border-2 border-purple-500 rounded-full rotate-slow"></div>
        <div class="absolute top-40 right-20 w-48 h-48 border-2 border-pink-500 transform rotate-45 float-animation"></div>
        <div class="absolute bottom-20 left-1/4 w-96 h-96 border-2 border-purple-500 rotate-slow" style="animation-duration: 40s;"></div>
        <div class="absolute top-1/2 right-1/3 w-32 h-32 border-2 border-pink-500 rounded-lg infinite-effect"></div>
    </div>

    <!-- 导航 -->
    <nav class="relative z-10 bg-gray-800/80 backdrop-blur-md border-b border-gray-700 sticky top-0">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="flex items-center space-x-2 hover:text-purple-400 transition">
                        <i class="fas fa-arrow-left"></i>
                        <span>返回故事目录</span>
                    </a>
                    <div class="w-px h-8 bg-gray-600"></div>
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-book-open text-white text-sm"></i>
                        </div>
                        <span class="text-lg font-bold">终章：新的开始</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="fontDecrease" class="p-2 hover:bg-gray-700 rounded transition">
                        <i class="fas fa-minus"></i>
                    </button>
                    <span id="fontSize" class="text-sm">16px</span>
                    <button id="fontIncrease" class="p-2 hover:bg-gray-700 rounded transition">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button id="themeToggle" class="p-2 hover:bg-gray-700 rounded transition">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 面包屑导航 -->
    <div class="relative z-10 bg-gray-800/50 border-b border-gray-700 px-6 py-2">
        <div class="container mx-auto">
            <div class="flex items-center space-x-2 text-sm">
                <a href="index.html" class="text-gray-400 hover:text-white transition">故事目录</a>
                <i class="fas fa-chevron-right text-gray-500 text-xs"></i>
                <a href="index.html#chapters" class="text-gray-400 hover:text-white transition">章节</a>
                <i class="fas fa-chevron-right text-gray-500 text-xs"></i>
                <span class="text-purple-400">终章：新的开始</span>
                <i class="fas fa-chevron-right text-gray-500 text-xs"></i>
                <span class="text-gray-300">无尽的故事</span>
            </div>
        </div>
    </div>

    <!-- 主内容 -->
    <main class="relative z-10 container mx-auto px-6 py-12 max-w-4xl">
        <!-- 章节标题 -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">
                <span class="gradient-text">第三节：无尽的故事</span>
            </h1>
            <div class="w-32 h-1 bg-gradient-to-r from-purple-500 to-pink-500 mx-auto mb-6 story-effect"></div>
            <p class="text-gray-400 text-lg">每一个结束，都是新的开始</p>
        </header>

        <!-- 章节内容 -->
        <div class="story-content text-lg" id="storyContent">
            <p>
                经过三个月的努力，守护者们终于找到了与变异体共存的方法。
                不是通过战斗，也不是通过封印，而是通过理解和接纳。
                薇拉的发现改变了一切——这个变异体并不是威胁，
                而是几何境域进化的下一个阶段。
            </p>
            
            <p>
                "我们称它为'第五形态'，"薇拉在全境广播中宣布，
                "它代表了秩序与混沌的和谐统一。就像阴和阳，
                就像光明和黑暗，它们不是对立的，而是互补的。"
            </p>
            
            <div class="bg-gray-800/50 rounded-xl p-6 border border-purple-500/30 my-8">
                <h3 class="text-xl font-bold mb-4 text-purple-400">
                    <i class="fas fa-infinity mr-2"></i>第五形态：和谐之体
                </h3>
                <ul class="space-y-2 text-gray-300">
                    <li><i class="fas fa-yin-yang text-purple-400 mr-2"></i>融合了秩序与混沌的双重属性</li>
                    <li><i class="fas fa-balance-scale text-pink-400 mr-2"></i>维持几何境域的动态平衡</li>
                    <li><i class="fas fa-seedling text-green-400 mr-2"></i>促进形素能量的进化和创新</li>
                    <li><i class="fas fa-eye text-blue-400 mr-2"></i>具有集体智慧，与所有生命相连</li>
                </ul>
            </div>
            
            <p>
                和谐之体的出现标志着几何境域进入了全新的纪元。
                五种形态——圆环、三角、方碑、螺旋，以及新生的和谐之体——
                共同构成了一个更加完整的世界。和谐之城进行了扩建，
                新增了专门研究和学习第五形态的学院。
            </p>
            
            <p>
                艾欧站在新建的"五形神殿"中，感受着前所未有的和谐。
                形素能量以一种全新的方式流动着，五种形态的能量相互交织，
                创造出美妙的图案。这是她从未见过的景象——
                一个真正实现了完美的世界。
            </p>
            
            <div class="dialogue">
                "你看，"塞琳站在她身边，微笑着说，"我们的牺牲没有白费。
                我们不仅守护了这个世界，还帮助它进化到了更高的层次。"
            </div>
            
            <p>
                十年过去了，几何境域发生了翻天覆地的变化。
                新的形素技术不断涌现，让生活变得更加美好。
                孩子们从小就学习五种形态的知识，他们天生就能理解
                秩序与混沌的统一。曾经的对立已经成为了历史。
            </p>
            
            <div class="bg-gray-800/50 rounded-xl p-6 border border-pink-500/30 my-8">
                <h3 class="text-xl font-bold mb-4 text-pink-400">
                    <i class="fas fa-star mr-2"></i>新纪元的成就
                </h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="font-semibold mb-2 text-purple-400">形素科技</h4>
                        <p class="text-sm text-gray-400">利用第五形态开发的新技术，解决了能源和资源问题</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2 text-blue-400">跨形态合作</h4>
                        <p class="text-sm text-gray-400">五种形态共同参与的所有决策和创新</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2 text-green-400>教育革新</h4>
                        <p class="text-sm text-gray-400">年轻一代拥有更广阔的视野和创造力</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2 text-yellow-400">宇宙探索</h4>
                        <p class="text-sm text-gray-400">开始向其他世界扩展，分享几何境域的智慧</p>
                    </div>
                </div>
            </div>
            
            <p>
                托里克已经从三角议会将军的位置上退休，
                现在担任五形学院的军事导师。他教导学生们的不仅仅是战斗技巧，
                更重要的是守护的理念。"力量不是为了征服，"他常说，
                "而是为了保护那些需要保护的东西。"
            </p>
            
            <p>
                拉克继续推进着方碑盟约的改革。在他的努力下，
                曾经死板的规则变得更加灵活，能够适应不断变化的世界。
                "规则不是为了限制，"他喜欢这样告诉年轻的学者，
                "而是为了引导。就像河流的堤岸，它不是为了阻止水流，
                而是为了让水流向正确的方向。"
            </p>
            
            <p>
                薇拉成为了第五形态研究的大师。她与和谐之体建立了深厚的联系，
                能够理解它的语言和思想。她发现，和谐之体不仅仅是单一的存在，
                而是所有生命意识的集合体。它包含了过去、现在和未来的所有可能性。
            </p>
            
            <div class="dialogue">
                "每一个选择都会创造新的时间线，"薇拉在一次演讲中解释道，
                "但我们不是被动地接受命运。我们通过自己的决定，
                塑造着最好的未来。这就是自由意志的意义。"
            </div>
            
            <p>
                塞琳依然健在，她的智慧随着年龄的增长而愈发深邃。
                她现在是所有守护者的导师，传授着古老的智慧和新的见解。
                "生命就像螺旋，"她常常这样教导，
                "我们不断地回到起点，但每一次都在更高的层次上。
                这就是成长的意义。"
            </p>
            
            <p>
                而艾欧，作为第一位形素守护者，见证了这一切的变化。
                她的头发已经开始泛白，但她的眼神依然明亮如初。
                她知道自己的使命即将完成，是时候让下一代接过守护的责任了。
            </p>
            
            <div class="bg-gray-800/50 rounded-xl p-6 border border-purple-500/30 my-8 legacy-effect">
                <h3 class="text-xl font-bold mb-4 text-purple-400">
                    <i class="fas fa-crown mr-2"></i>守护者的传承
                </h3>
                <p class="text-gray-300">
                    在和谐之城的中央广场，一座新的雕像被揭幕。
                    雕像展现了五位守护者的形象：艾欧、托里克、拉克、薇拉，以及代表和谐之体的抽象形态。
                    雕像的基座上刻着一句话：<br><br>
                    <em>"他们教会了我们，真正的力量来自于团结，真正的智慧来自于包容，真正的和平来自于平衡。"</em>
                </p>
            </div>
            
            <p>
                一个宁静的黄昏，艾欧独自来到四重几何神殿的顶部。
                夕阳将整个城市染成了金色，五种形态的建筑在暮色中闪烁着柔和的光芒。
                远处，新一代的守护者们正在进行训练，他们的身影在夕阳下拉得很长。
            </p>
            
            <p>
                她想起了多年前那个平凡的圆环族学者，想起了偶然获得看见形素能力的那一刻。
                那一切仿佛就在昨天，又仿佛已经是上辈子的事。
                时光流逝，世界变迁，但有些东西永远不会改变——
                那就是对美好未来的信念，对守护这个世界的决心。
            </p>
            
            <div class="dialogue">
                "故事永远不会真正结束，"一个熟悉的声音在身后响起。
                塞琳缓步走来，站在她身边，"每一个结束都是新的开始。
                我们的章节可能即将完结，但几何境域的故事会永远继续下去。"
            </div>
            
            <p>
                艾欧微笑着点头。她知道塞琳说的是对的。
                她们的冒险可能已经结束，但她们播下的种子正在茁壮成长。
                新的英雄将会崛起，新的挑战将会出现，新的故事将会被书写。
                这就是生命的循环，这就是无尽的故事。
            </p>
            
            <div class="mt-12 p-6 bg-gradient-to-r from-purple-900/30 to-pink-900/30 rounded-xl border border-purple-500/50 story-effect">
                <h3 class="text-2xl font-bold mb-4 text-center">永恒的守护</h3>
                <p class="text-center italic text-gray-300">
                    "当最后一页被翻过，<br>
                    当最后的光芒消散，<br>
                    故事依然在继续——<br>
                    在每一个选择中，<br>
                    在每一个梦想里，<br>
                    在每一个守护者的心中。"
                </p>
            </div>
            
            <p class="mt-8 text-center">
                <em>—— 完 ——</em>
            </p>
            
            <div class="mt-12 text-center">
                <p class="text-gray-400 mb-4">感谢您阅读《几何境域：形态之战》</p>
                <div class="flex justify-center space-x-4">
                    <a href="../index.html" class="px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg hover:from-purple-600 hover:to-pink-700 transition">
                        <i class="fas fa-home mr-2"></i>返回主页
                    </a>
                    <a href="index.html" class="px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition">
                        <i class="fas fa-book mr-2"></i>重新阅读
                    </a>
                </div>
            </div>
        </div>

        <!-- 章节导航 -->
        <div class="mt-16 flex justify-between items-center">
            <a href="epilogue-section-2.html" class="flex items-center space-x-2 px-6 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg transition">
                <i class="fas fa-chevron-left"></i>
                <span>上一节：新的威胁</span>
            </a>
            <div class="text-gray-500">
                <i class="fas fa-flag-checkered mr-2"></i>故事完结
            </div>
        </div>
    </main>

    <!-- 评论区 -->
    <section class="relative z-10 container mx-auto px-6 py-12 max-w-4xl">
        <div class="bg-gray-800/50 rounded-xl p-6 border border-gray-700">
            <h3 class="text-xl font-bold mb-4 flex items-center">
                <i class="fas fa-comments mr-2 text-purple-400"></i>
                读者评论
            </h3>
            <div id="comments" class="space-y-4">
                <!-- 评论将通过JavaScript动态加载 -->
            </div>
            <div class="mt-6">
                <textarea id="commentInput" class="w-full bg-gray-700 rounded-lg p-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500" rows="3" placeholder="分享你的想法..."></textarea>
                <button id="submitComment" class="mt-3 px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg hover:from-purple-600 hover:to-pink-700 transition">
                    发表评论
                </button>
            </div>
        </div>
    </section>

    <!-- 页脚 -->
    <footer class="bg-gray-800 border-t border-gray-700 py-8 px-6 mt-16">
        <div class="container mx-auto text-center">
            <p class="text-gray-400">
                <i class="fas fa-pen-fancy mr-2"></i>
                几何境域：形态之战 | 终章：新的开始
            </p>
            <div class="mt-4 flex justify-center space-x-6">
                <a href="../index.html" class="text-gray-400 hover:text-white transition">
                    <i class="fas fa-home mr-1"></i>返回主页
                </a>
                <a href="../world-lore.html" class="text-gray-400 hover:text-white transition">
                    <i class="fas fa-book mr-1"></i>世界观
                </a>
                <a href="index.html" class="text-gray-400 hover:text-white transition">
                    <i class="fas fa-list mr-1"></i>故事目录
                </a>
            </div>
            <p class="mt-4 text-sm text-gray-500">
                © 2024 几何境域：形态之战 | 感谢您的阅读
            </p>
        </div>
    </footer>

    <script>
        // 阅读进度
        window.addEventListener('scroll', () => {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('readingProgress').style.width = scrolled + '%';
        });

        // 字体大小调整
        let fontSize = 16;
        const content = document.getElementById('storyContent');
        
        document.getElementById('fontIncrease').addEventListener('click', () => {
            if (fontSize < 24) {
                fontSize += 2;
                content.style.fontSize = fontSize + 'px';
                document.getElementById('fontSize').textContent = fontSize + 'px';
            }
        });
        
        document.getElementById('fontDecrease').addEventListener('click', () => {
            if (fontSize > 12) {
                fontSize -= 2;
                content.style.fontSize = fontSize + 'px';
                document.getElementById('fontSize').textContent = fontSize + 'px';
            }
        });

        // 主题切换
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        let isDarkTheme = true;
        
        themeToggle.addEventListener('click', () => {
            isDarkTheme = !isDarkTheme;
            body.classList.add('theme-transition');
            
            if (isDarkTheme) {
                body.className = body.className.replace('bg-gray-100 text-gray-900', 'bg-gray-900 text-white');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            } else {
                body.className = body.className.replace('bg-gray-900 text-white', 'bg-gray-100 text-gray-900');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            setTimeout(() => {
                body.classList.remove('theme-transition');
            }, 300);
        });

        // 评论系统
        const comments = [
            {
                author: "忠实读者",
                content: "太感人了！十年的时光，五个守护者的故事完美落幕！第五形态的设定真是太妙了！",
                time: "刚刚"
            },
            {
                author: "几何爱好者",
                content: "这个故事教会了我很多关于平衡、团结和成长的重要性。感谢作者创作了这么精彩的世界！",
                time: "5分钟前"
            },
            {
                author: "形素研究者",
                content: "从混沌到和谐，从分裂到团结，这是一个关于成长的美丽故事。期待作者的新作品！",
                time: "10分钟前"
            }
        ];

        function renderComments() {
            const commentsContainer = document.getElementById('comments');
            commentsContainer.innerHTML = comments.map(comment => `
                <div class="bg-gray-700 rounded-lg p-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-semibold text-purple-400">${comment.author}</span>
                        <span class="text-xs text-gray-400">${comment.time}</span>
                    </div>
                    <p class="text-gray-300">${comment.content}</p>
                </div>
            `).join('');
        }

        renderComments();

        document.getElementById('submitComment').addEventListener('click', () => {
            const input = document.getElementById('commentInput');
            const content = input.value.trim();
            
            if (content) {
                comments.unshift({
                    author: "读者",
                    content: content,
                    time: "刚刚"
                });
                renderComments();
                input.value = '';
            }
        });

        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>